# üó∫Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Map Points

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### 1. –°–æ–∑–¥–∞—Ç—å —Ç–æ—á–∫–∏ –∫–∞—Ä—Ç—ã (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
```bash
npx convex run mapPointsSeed:seedMapPoints
```

### 2. –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏
```bash
npx convex run mapPointsSeed:clearMapPoints
```

### 3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–æ—á–∫–∏ (–æ—á–∏—Å—Ç–∫–∞ + —Å–æ–∑–¥–∞–Ω–∏–µ)
```bash
npx convex run mapPointsSeed:reseedMapPoints
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ—á–µ–∫

### üèïÔ∏è –í—Ä–µ–º–µ–Ω–Ω—ã–π –ª–∞–≥–µ—Ä—å
- **synthesis_camp_storage** - –°–∫–ª–∞–¥ "–°–∏–Ω—Ç–µ–∑–∞" —Å –ø—Ä–∏–ø–∞—Å–∞–º–∏

### üîß –ú–∞—Å—Ç–µ—Ä—Å–∫–∏–µ
- **workshop_center** - –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –î–∏—Ç–µ—Ä–∞ (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è)
- **carl_private_workshop** - –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –ö–∞—Ä–ª–∞ "–®–µ—Å—Ç–µ—Ä—ë–Ω–∫–∏"

### üè• –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–æ—á–∫–∏
- **synthesis_medical_center** - –ú–µ–¥–ø—É–Ω–∫—Ç "–°–∏–Ω—Ç–µ–∑–∞"

### ‚öîÔ∏è –í–æ–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (FJR)
- **fjr_board** - –î–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π FJR
- **fjr_briefing_point** - –ë—Ä–∏—Ñ–∏–Ω–≥ FJR

### üèõÔ∏è –†–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ —Ç–æ—á–∫–∏
- **old_believers_square** - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å (–û—Ç–µ—Ü –ò–æ–∞–Ω–Ω)

### üè¥‚Äç‚ò†Ô∏è –ê–Ω–∞—Ä—Ö–∏—Å—Ç—Å–∫–∏–µ —Ç–æ—á–∫–∏
- **anarchist_hole** - ¬´–î—ã—Ä–∞¬ª (—Å–≤–æ–±–æ–¥–Ω–∞—è –∑–æ–Ω–∞)
- **anarchist_arena_basement** - –ü–æ–¥–≤–∞–ª –ê—Ä–µ–Ω—ã (–ó–∞–∫–ª—ë–ø–∫–∞)

### üé≠ –†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏
- **quiet_cove_bar** - –ë–∞—Ä "–¢–∏—Ö–∞—è –ó–∞–≤–æ–¥—å" (–õ—é–¥–∞)

### ‚öóÔ∏è –ê–Ω–æ–º–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã
- **northern_anomaly** - –°–µ–≤–µ—Ä–Ω–∞—è –∞–Ω–æ–º–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞

## –¢–∏–ø—ã —Ç–æ—á–µ–∫

- **poi** - Point of Interest (–æ–±—ã—á–Ω–∞—è —Ç–æ—á–∫–∞ –∏–Ω—Ç–µ—Ä–µ—Å–∞)
- **npc** - NPC –ø–µ—Ä—Å–æ–Ω–∞–∂ (–¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤)
- **quest** - –ö–≤–µ—Å—Ç–æ–≤–∞—è —Ç–æ—á–∫–∞
- **location** - –õ–æ–∫–∞—Ü–∏—è
- **board** - –î–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- **settlement** - –ü–æ—Å–µ–ª–µ–Ω–∏–µ
- **anomaly** - –ê–Ω–æ–º–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞

## –°—Ç–∞—Ç—É—Å—ã —Ç–æ—á–µ–∫

1. **not_found** - –ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ (—Å–∫—Ä—ã—Ç–∞ –æ—Ç –∏–≥—Ä–æ–∫–∞)
2. **discovered** - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ (–≤–∏–¥–Ω–∞ –Ω–∞ –∫–∞—Ä—Ç–µ, –º–æ–∂–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å)
3. **researched** - –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∞ (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º)

## –§–∞–∑—ã –∏–≥—Ä—ã

- **Phase 1** - –ù–∞—á–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞ (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–æ—á–µ–∫)
- **Phase 2** - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ–∞–∑–∞ (–∞–Ω–∞—Ä—Ö–∏—Å—Ç—ã, –∞–Ω–æ–º–∞–ª–∏–∏)

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–æ—á–µ–∫

–ö–∞–∂–¥–∞—è —Ç–æ—á–∫–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

- **category** - –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ—á–∫–∏
- **faction** - –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ —Ñ—Ä–∞–∫—Ü–∏–∏
- **services** - –î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å–ª—É–≥–∏
- **npcId** - ID –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- **dialogues** - –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏
- **questBindings** - –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç—ã
- **atmosphere** - –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã
- **danger_level** - –£—Ä–æ–≤–µ–Ω—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **relationship** - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å NPC
- **tradeOptions** - –¢–æ—Ä–≥–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **hazards** - –û–ø–∞—Å–Ω–æ—Å—Ç–∏ (–¥–ª—è –∞–Ω–æ–º–∞–ª–∏–π)
- **rewards** - –ù–∞–≥—Ä–∞–¥—ã (–¥–ª—è –∞–Ω–æ–º–∞–ª–∏–π)

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
```typescript
const points = await ctx.runQuery(api.mapPoints.listVisible, {
  deviceId: 'your-device-id',
  phase: 1
})
```

### –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–æ—á–∫—É
```typescript
const result = await ctx.runMutation(api.mapPoints.markResearched, {
  deviceId: 'your-device-id',
  pointKey: 'workshop_center'
})
```

### –ü–æ–ª—É—á–∏—Ç—å —Ç–æ—á–∫–∏ –≤ —Ä–∞–¥–∏—É—Å–µ
```typescript
const nearby = await ctx.runQuery(api.mapPoints.getPointsInRadius, {
  lat: 48.0015,
  lng: 7.855,
  radiusKm: 0.5,
  type: 'npc'
})
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### –°–≤—è–∑—å —Å NPC
–¢–æ—á–∫–∏ —Ç–∏–ø–∞ `npc` —Å–æ–¥–µ—Ä–∂–∞—Ç:
- `npcId` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- `characterName` - –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- `dialogues` - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏
- `relationship` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–π

### –°–≤—è–∑—å —Å –∫–≤–µ—Å—Ç–∞–º–∏
–ß–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `mappoint_bindings`:
- –¢–æ—á–∫–∞ –º–æ–∂–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å –∫–≤–µ—Å—Ç (`start`)
- –¢–æ—á–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å –∫–≤–µ—Å—Ç (`progress`)
- –¢–æ—á–∫–∞ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∞—Ç—å –∫–≤–µ—Å—Ç (`complete`)

### –°–≤—è–∑—å —Å —Ñ—Ä–∞–∫—Ü–∏—è–º–∏
–ö–∞–∂–¥–∞—è —Ç–æ—á–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —Ñ—Ä–∞–∫—Ü–∏–∏:
- `synthesis` - –°–∏–Ω—Ç–µ–∑
- `fjr` - –í–æ–ª—å–Ω—ã–µ –µ–≥–µ—Ä—è
- `old_believers` - –°—Ç–∞—Ä–æ–æ–±—Ä—è–¥—Ü—ã
- `anarchists` - –ê–Ω–∞—Ä—Ö–∏—Å—Ç—ã
- `neutral` - –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫
npx convex run mapPoints:listVisible '{"phase": 1}' --json

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç–æ—á–∫—É
npx convex run mapPoints:getPointsInRadius '{"lat": 48.0015, "lng": 7.855, "radiusKm": 0.1}' --json
```



